var WMNSAPI={hook_callback:null,__domain:function(e){return e.replace(/^https?:\/\/(www\.|)([^\/]+)\/?.*$/gm,"$2").toLowerCase()},__is_social:function(e){return/:\/\/[^\/]*(twitter|facebook|linkedin|vk\.com|odnoklassniki)/gi.exec(e)},__is_organic:function(e){return/:\/\/(?:www\.)?(google|yandex|mail\.ru|search\.tut\.by|rambler|bing|yahoo)(?:\.(\w+))?/gi.exec(e)},__writeCookieJSON:function(e,t){document.cookie=e+"="+encodeURIComponent(JSON.stringify(t))+";path=/;"},__readCookieJSON:function(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),-1!=c_start)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),JSON.parse(decodeURIComponent(document.cookie.substring(c_start,c_end)))):null},__detect:function(){if(null!==(o=this.__readCookieJSON("WMNSAPI")))return o;if(null===(o=this.__utmz())){var e=document.URL,t=document.referrer,o={source:null,medium:null,term:null,content:null,campaign:null,gclid:null};""===t||this.__domain(e)===this.__domain(t)?(o.source="(direct)",o.medium="(none)",(tag=e.match(/utm_source=([^&]*)/i))&&null!==tag&&(o.source=decodeURIComponent(tag[1]).toLowerCase(),tag=e.match(/utm_medium=([^&]+)/i),o.medium=null!==tag?decodeURIComponent(tag[1]).toLowerCase():"",tag=e.match(/utm_campaign=([^&]+)/i),o.campaign=null!==tag?decodeURIComponent(tag[1]).toLowerCase():"",tag=e.match(/utm_term=([^&]+)/i),o.term=null!==tag?decodeURIComponent(tag[1]).toLowerCase():"",tag=e.match(/utm_content=([^&]+)/i),o.content=null!==tag?decodeURIComponent(tag[1]).toLowerCase():"")):""!==t&&((match=this.__is_organic(t))&&null!==match?(o.source=match[1].toLowerCase().replace(/\./g,""),o.medium="organic","google"===o.medium&&null!==(match=e.match(/gclid=(.*?)(?:&|$)/i))&&(o.gclid=match[1],o.source="google",o.medium="cpc")):(match=this.__is_social(t))&&null!=match&&(o.medium="social",o.source=match[1].toLowerCase()),(tag=e.match(/utm_source=([^&]*)/i))&&null!=tag?(o.source=decodeURIComponent(tag[1]).toLowerCase(),tag=e.match(/utm_medium=([^&]+)/i),o.medium=null!==tag?decodeURIComponent(tag[1]).toLowerCase():"",tag=e.match(/utm_campaign=([^&]+)/i),o.campaign=null!==tag?decodeURIComponent(tag[1]).toLowerCase():"",tag=e.match(/utm_term=([^&]+)/i),o.term=null!==tag?decodeURIComponent(tag[1]).toLowerCase():"",tag=e.match(/utm_content=([^&]+)/i),o.content=null!==tag?decodeURIComponent(tag[1]).toLowerCase():""):""===o.source&&(o.medium="referrer",o.source=t.replace(/.*?:\/\/(?:www\.)?([^\/]+)(?:\/([^?&;]*))?.*/gi,"$1").toLowerCase()))}return this.__writeCookieJSON("WMNSAPI",o),o},__utmz:function(){var e={source:null,medium:null,term:null,content:null,campaign:null,gclid:null},t=this.cookie().match(/__utmz\s*=\s*(.+?)(?:;|$)/);if(null!==t){for(var o=/(utm\w+)=(.*?)(?:\||$)/g,n=o.exec(t[1]);null!==n;)"utmcsr"===n[1]?e.source=n[2].toLowerCase():"utmcmd"===n[1]?e.medium=n[2].toLowerCase():"utmctr"===n[1]?e.term=n[2]:"utmcct"===n[1]?e.content=n[2]:"utmccn"===n[1]?e.campaign=n[2]:"utmgclid"===n[1]&&(e.gclid=n[2],e.source="google",e.medium="cpc"),n=o.exec(t[1]);return e}return null},cookie:function(){return document.cookie},track:function(e,t){var o=this.__detect(),n=null;for(i=0;i<e.length;i++){var c=e[i];if(void 0!==c.medium&&c.medium.toLowerCase()===o.medium&&(void 0===c.source||c.source.toLowerCase()===o.source))return void("function"==typeof this.hook_callback?this.hook_callback.call(this,c,o):"function"==typeof t&&t.call(this,c,o));"custom"===c.medium&&(n=c)}null!==n&&("function"==typeof n.do?this.customTracker.do.call(this,n,o):"function"==typeof this.hook_callback?this.hook_callback.call(this,n,o):"function"==typeof t&&t.call(this,n,o))},format:function(e,t){for(var o=/\{\{(\d+):(\d+)\}\}/,n=e;match=o.exec(n);)n=n.replace(match[0],t.substring(parseInt(match[1]),parseInt(match[1])+parseInt(match[2])));return n},element:function(e){return"#"===e[0]?el=document.getElementById(e.substring(1)):"."===e[0]?(el=document.getElementsByClassName(e.substring(1)),el.length&&(el=el[0])):el=document.querySelector(e),el},html:function(e,t){var o=this.element(e);null!==o&&(o.innerHTML=t)},display:function(e,t){var o=this.element(e);null!==o&&(o.style.display=t?"":"none")},visible:function(e,t){var o=this.element(e);null!==o&&(o.style.visibility=t?"visible":"hidden")},hook:function(e){this.hook_callback=e}};